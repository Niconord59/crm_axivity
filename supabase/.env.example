############################################################
# Supabase Self-Hosted - Configuration
# CRM Axivity
############################################################

# ===========================================
# URLs EXTERNES (à adapter selon ton domaine)
# ===========================================

# URL publique de l'API Supabase (Kong)
API_EXTERNAL_URL=https://api.crm.ton-domaine.com

# URL du site frontend (Next.js)
SITE_URL=https://crm.ton-domaine.com

# URLs de redirection autorisées (séparées par des virgules)
ADDITIONAL_REDIRECT_URLS=https://crm.ton-domaine.com/**,http://localhost:3000/**

# ===========================================
# POSTGRESQL
# ===========================================

POSTGRES_PASSWORD=votre-mot-de-passe-super-securise
POSTGRES_DB=postgres
POSTGRES_PORT=5432

# ===========================================
# JWT & SECRETS
# Générer avec: openssl rand -base64 32
# ===========================================

# Secret JWT (CRITIQUE - ne jamais exposer)
JWT_SECRET=votre-jwt-secret-genere-avec-openssl-rand-base64-32

# Durée de validité du token (en secondes, 3600 = 1h)
JWT_EXP=3600

# Secret pour Realtime
SECRET_KEY_BASE=votre-secret-key-base-genere-avec-openssl-rand-base64-64

# ===========================================
# CLÉS API SUPABASE
# Générer sur https://supabase.com/docs/guides/self-hosting#api-keys
# Ou utiliser: npx supabase-keys generate
# ===========================================

# Clé anonyme (utilisée côté client)
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Clé service_role (utilisée côté serveur uniquement, accès total)
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ===========================================
# PORTS (ajuster si conflits)
# ===========================================

KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443
STUDIO_PORT=3001

# ===========================================
# STUDIO (Dashboard Admin)
# ===========================================

DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=votre-mot-de-passe-dashboard

STUDIO_DEFAULT_ORGANIZATION=CRM Axivity
STUDIO_DEFAULT_PROJECT=CRM Axivity

# ===========================================
# GOOGLE OAUTH (pour login Google)
# Console: https://console.cloud.google.com/
# ===========================================

ENABLE_GOOGLE_AUTH=true
GOOGLE_CLIENT_ID=xxxxxxxxxxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxx

# ===========================================
# EMAIL (SMTP) - Optionnel mais recommandé
# Pour les emails de confirmation, reset password, etc.
# ===========================================

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=votre-email@gmail.com
SMTP_PASS=votre-app-password-gmail
SMTP_ADMIN_EMAIL=admin@ton-domaine.com
SMTP_SENDER_NAME=CRM Axivity

# Auto-confirmer les emails (true = pas de confirmation par email)
MAILER_AUTOCONFIRM=false

# ===========================================
# AUTRES
# ===========================================

# Désactiver l'inscription publique (true = invitation uniquement)
DISABLE_SIGNUP=false

# Référence du projet (peut être laissé par défaut)
PROJECT_REF=crm-axivity

# Région (pour storage)
REGION=eu-west-1

# Logflare (analytics, optionnel)
LOGFLARE_API_KEY=


############################################################
# INSTRUCTIONS DE GÉNÉRATION DES CLÉS
############################################################
#
# 1. Générer JWT_SECRET:
#    openssl rand -base64 32
#
# 2. Générer SECRET_KEY_BASE:
#    openssl rand -base64 64
#
# 3. Générer ANON_KEY et SERVICE_ROLE_KEY:
#    Utiliser https://supabase.com/docs/guides/self-hosting/docker#generate-api-keys
#    Ou générer manuellement avec jwt.io en utilisant le JWT_SECRET
#
#    Payload ANON_KEY:
#    {
#      "role": "anon",
#      "iss": "supabase",
#      "iat": 1700000000,
#      "exp": 1900000000
#    }
#
#    Payload SERVICE_ROLE_KEY:
#    {
#      "role": "service_role",
#      "iss": "supabase",
#      "iat": 1700000000,
#      "exp": 1900000000
#    }
#
############################################################
